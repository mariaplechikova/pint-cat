const cats = [
    {
        "breeds": [],
        "categories": [
            {
                "id": 5,
                "name": "boxes"
            }
        ],
        "id": "d5",
        "url": "https://cdn2.thecatapi.com/images/d5.png",
        "width": 600,
        "height": 588
    },
    {
        "breeds": [],
        "id": "1ck",
        "url": "https://cdn2.thecatapi.com/images/1ck.jpg",
        "width": 968,
        "height": 968
    },
    {
        "breeds": [],
        "id": "1dl",
        "url": "https://cdn2.thecatapi.com/images/1dl.jpg",
        "width": 612,
        "height": 612
    },
    {
        "breeds": [],
        "categories": [
            {
                "id": 6,
                "name": "caturday"
            }
        ],
        "id": "3be",
        "url": "https://cdn2.thecatapi.com/images/3be.jpg",
        "width": 640,
        "height": 640
    },
    {
        "breeds": [],
        "id": "4gf",
        "url": "https://cdn2.thecatapi.com/images/4gf.gif",
        "width": 336,
        "height": 180
    },
    {
        "breeds": [],
        "id": "6rj",
        "url": "https://cdn2.thecatapi.com/images/6rj.jpg",
        "width": 640,
        "height": 427
    },
    {
        "breeds": [],
        "id": "9du",
        "url": "https://cdn2.thecatapi.com/images/9du.gif",
        "width": 400,
        "height": 280
    },
    {
        "breeds": [],
        "id": "9vh",
        "url": "https://cdn2.thecatapi.com/images/9vh.jpg",
        "width": 683,
        "height": 1024
    },
    {
        "breeds": [],
        "id": "b1a",
        "url": "https://cdn2.thecatapi.com/images/b1a.jpg",
        "width": 550,
        "height": 439
    },
    {
        "breeds": [],
        "id": "b73",
        "url": "https://cdn2.thecatapi.com/images/b73.jpg",
        "width": 500,
        "height": 500
    },
    {
        "breeds": [],
        "id": "d6t",
        "url": "https://cdn2.thecatapi.com/images/d6t.png",
        "width": 979,
        "height": 577
    },
    {
        "breeds": [],
        "id": "did",
        "url": "https://cdn2.thecatapi.com/images/did.jpg",
        "width": 640,
        "height": 640
    },
    {
        "breeds": [],
        "id": "eic",
        "url": "https://cdn2.thecatapi.com/images/eic.jpg",
        "width": 500,
        "height": 375
    },
    {
        "breeds": [],
        "id": "MTY0MDgwOA",
        "url": "https://cdn2.thecatapi.com/images/MTY0MDgwOA.jpg",
        "width": 500,
        "height": 338
    },
    {
        "breeds": [],
        "id": "MTk1NjM4MA",
        "url": "https://cdn2.thecatapi.com/images/MTk1NjM4MA.jpg",
        "width": 500,
        "height": 375
    },
    {
        "breeds": [],
        "id": "MjAyNTY4Ng",
        "url": "https://cdn2.thecatapi.com/images/MjAyNTY4Ng.jpg",
        "width": 720,
        "height": 540
    },
    {
        "breeds": [],
        "id": "MjAzMDMwMg",
        "url": "https://cdn2.thecatapi.com/images/MjAzMDMwMg.jpg",
        "width": 519,
        "height": 778
    },
    {
        "breeds": [
            {
                "weight": {
                    "imperial": "8 - 20",
                    "metric": "4 - 9"
                },
                "id": "raga",
                "name": "Ragamuffin",
                "cfa_url": "http://cfa.org/Breeds/BreedsKthruR/Ragamuffin.aspx",
                "vetstreet_url": "http://www.vetstreet.com/cats/ragamuffin",
                "vcahospitals_url": "https://vcahospitals.com/know-your-pet/cat-breeds/ragamuffin",
                "temperament": "Affectionate, Friendly, Gentle, Calm",
                "origin": "United States",
                "country_codes": "US",
                "country_code": "US",
                "description": "The Ragamuffin is calm, even tempered and gets along well with all family members. Changes in routine generally do not upset her. She is an ideal companion for those in apartments, and with children due to her patient nature.",
                "life_span": "12 - 16",
                "indoor": 0,
                "lap": 1,
                "alt_names": "",
                "adaptability": 5,
                "affection_level": 5,
                "child_friendly": 4,
                "dog_friendly": 5,
                "energy_level": 3,
                "grooming": 3,
                "health_issues": 3,
                "intelligence": 5,
                "shedding_level": 3,
                "social_needs": 3,
                "stranger_friendly": 5,
                "vocalisation": 1,
                "experimental": 0,
                "hairless": 0,
                "natural": 0,
                "rare": 0,
                "rex": 0,
                "suppressed_tail": 0,
                "short_legs": 0,
                "wikipedia_url": "https://en.wikipedia.org/wiki/Ragamuffin_cat",
                "hypoallergenic": 0,
                "reference_image_id": "SMuZx-bFM"
            }
        ],
        "id": "--YZl1YWO",
        "url": "https://cdn2.thecatapi.com/images/--YZl1YWO.jpg",
        "width": 1440,
        "height": 1585
    },
    {
        "breeds": [],
        "id": "849Y-yFls",
        "url": "https://cdn2.thecatapi.com/images/849Y-yFls.jpg",
        "width": 500,
        "height": 332
    },
    {
        "breeds": [],
        "id": "u0uA2vzdf",
        "url": "https://cdn2.thecatapi.com/images/u0uA2vzdf.jpg",
        "width": 3264,
        "height": 2448
    },
    {
        "breeds": [],
        "id": "r-uWpSgnT",
        "url": "https://cdn2.thecatapi.com/images/r-uWpSgnT.jpg",
        "width": 660,
        "height": 495
    },
    {
        "breeds": [],
        "id": "h3UoPiPIo",
        "url": "https://cdn2.thecatapi.com/images/h3UoPiPIo.jpg",
        "width": 4928,
        "height": 3264
    },
    {
        "breeds": [],
        "id": "A82dpJ-9Q",
        "url": "https://cdn2.thecatapi.com/images/A82dpJ-9Q.jpg",
        "width": 700,
        "height": 990
    },
    {
        "breeds": [],
        "id": "PX8wQv9Uj",
        "url": "https://cdn2.thecatapi.com/images/PX8wQv9Uj.jpg",
        "width": 252,
        "height": 189
    },
    {
        "breeds": [],
        "id": "Tv9kFHKIw",
        "url": "https://cdn2.thecatapi.com/images/Tv9kFHKIw.jpg",
        "width": 184,
        "height": 273
    }
]

const navItemAll = document.querySelector('.nav-all')
const navItemLike = document.querySelector('.nav-like')

const catBlock = document.querySelector('.block')

const buttonMore = document.querySelector('.more')

let likeImgRed = []
let newCats = []

navItemAll.classList.add('active')

catsRender(cats, 0, 15)

for ( let i = 0; i < cats.length; i++) {
    cats[i].favorite = false
}

navItemAll.addEventListener('click', function() {
    event.preventDefault()
    catBlock.innerHTML = ''
    navItemAll.classList.add('active')
    navItemLike.classList.remove('active')
    catsRender(cats, 0, 15)
})

navItemLike.addEventListener('click', function() {
    console.log('nav item like')
    event.preventDefault()
    catBlock.innerHTML = ''
    navItemLike.classList.add('active')
    navItemAll.classList.remove('active')
    getCatsFavorite()
    catsRender(newCats, 0, newCats.length)
})

function catsRender(arr, start, end) {
    for ( let i = start; i < end; i++) {
        catBlock.innerHTML += `
            <div class="cat-block" id="${arr[i].id}">
                <div class="cat-block-img">
                    <img src=${arr[i].url} class="cat-img">
                    <img src="Vector-red.png" class="like-img-red">
                    <img src="Vector.png" class="like-img">
                </div>    
            </div>  `
    }
    
    likeImgRed = document.querySelectorAll(".like-img-red")

    for (let i = start; i < end; i++) {
        if (arr[i].favorite === true) {
            likeImgRed[i].style.display = "block"
        }
    }

}

buttonMore.addEventListener('click', function() {
    catsRender(cats, 15, 25)
})


catBlock.addEventListener("click", function (event) {
    let elem = event.target

    while(elem) {
        if (elem.matches(".cat-block")) {
            break;
        }

        elem = elem.parentElement
    }

    if (elem) {
        const imgRed = elem.querySelector('.like-img-red')
        const id = elem.getAttribute("id")

        if (getComputedStyle(imgRed).display === 'block') {
            imgRed.style.display = "none"
            setCatsFavorite(id, false)
        } else {
            imgRed.style.display = "block"
            setCatsFavorite(id, true)
        }
    }
});

function setCatsFavorite(id, status) {
    const i = cats.findIndex((item) => item.id === id);

    cats[i].favorite = status
}

function getCatsFavorite() {
    newCats = []
    for (let i = 0; i < cats.length; i++) {
        console.log(cats[i].favorite)

        if (cats[i].favorite === true) {
            console.log('test')
            newCats.push(cats[i])
        }
    }

    return newCats
}


